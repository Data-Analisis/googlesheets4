<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Build URL for authentication — gs_webapp_auth_url • googlesheets2</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">googlesheets2</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/tidyverse/googlesheets2">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Build URL for authentication</h1>
    </div>

    
    <p>Build the Google URL that googlesheets needs to direct users to in order to
authenticate in a Web Server Application. This function is designed for use
in Shiny apps. In contrast, the default authorization sequence in
googlesheets is appropriate for a user working directly with R on a local
computer, where the default handshakes between the local computer and Google
work just fine. The first step in the Shiny-based workflow is to form the
Google URL where the user can authenticate him or herself with Google. After
success, the response, in the form of an authorization code, is sent to the
<code>redirect_uri</code> (see below) which <code><a href='gs_webapp_get_token.html'>gs_webapp_get_token()</a></code> uses to exchange for
an access token. This token is then stored in the usual manner for this
package and used for subsequent API requests.</p>
    

    <pre class="usage"><span class='fu'>gs_webapp_auth_url</span>(<span class='kw'>client_id</span> <span class='kw'>=</span> <span class='fu'>getOption</span>(<span class='st'>"googlesheets.webapp.client_id"</span>),
  <span class='kw'>redirect_uri</span> <span class='kw'>=</span> <span class='fu'>getOption</span>(<span class='st'>"googlesheets.webapp.redirect_uri"</span>),
  <span class='kw'>access_type</span> <span class='kw'>=</span> <span class='st'>"online"</span>, <span class='kw'>approval_prompt</span> <span class='kw'>=</span> <span class='st'>"auto"</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>client_id</th>
      <td><p>client id obtained from Google Developers Console</p></td>
    </tr>
    <tr>
      <th>redirect_uri</th>
      <td><p>where the response is sent, should be one of the
<code>redirect_uri</code> values listed for the project in Google's Developer Console,
must match exactly as listed, including any trailing <code>/</code></p></td>
    </tr>
    <tr>
      <th>access_type</th>
      <td><p>either "online" (no refresh token) or "offline" (refresh
token), determines whether a refresh token is returned in the response</p></td>
    </tr>
    <tr>
      <th>approval_prompt</th>
      <td><p>either "force" or "auto", determines whether the user
is reprompted for consent, If set to "auto", then the user only has to see
the consent page once for the first time through the authorization
sequence. If set to "force" then user will have to grant consent everytime
even if they have previously done so.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>That was the good news. The bad news is you'll need to use the <a href = 'https://console.developers.google.com'>GoogleDevelopers Console</a> to <em>obtain your
own client ID and secret and declare the <code>redirect_uri</code> specific to your
project</em>. Inform googlesheets of this information by providing as function
arguments or by defining these options. For example, you can put lines like
this into a Project-specific <code>.Rprofile</code> file:</p><pre>options("googlesheets.webapp.client_id" = MY_CLIENT_ID)
options("googlesheets.webapp.client_secret" = MY_CLIENT_SECRET)
options("googlesheets.webapp.redirect_uri" = MY_REDIRECT_URI)
</pre>
    <p>Based on Google Developers' guide to <a href = 'https://developers.google.com/identity/protocols/OAuth2WebServer'>Using OAuth2.0 for Web ServerApplications</a>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='gs_webapp_get_token.html'>gs_webapp_get_token()</a></code></p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jennifer Bryan, <a href='https://www.rstudio.com'><img src='http://tidyverse.org/rstudio-logo.svg' height='24' /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
